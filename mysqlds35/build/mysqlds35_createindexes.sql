-- Tables
USE DS3;

CREATE UNIQUE INDEX IX_CUST_USERNAME5 ON CUSTOMERS5 
  (
  USERNAME
  );

CREATE INDEX IX_CUST_HIST_CUSTOMERID5 ON CUST_HIST5
  (
  CUSTOMERID
  );

ALTER TABLE CUST_HIST5
  ADD CONSTRAINT FK_CUST_HIST_CUSTOMERID5 FOREIGN KEY (CUSTOMERID)
  REFERENCES CUSTOMERS5 (CUSTOMERID)
  ON DELETE CASCADE
  ;

CREATE INDEX IX_ORDER_CUSTID5 ON ORDERS5
  (
  CUSTOMERID
  );

ALTER TABLE ORDERS5 
  ADD CONSTRAINT FK_CUSTOMERID5 FOREIGN KEY (CUSTOMERID)
  REFERENCES CUSTOMERS5 (CUSTOMERID)
  ON DELETE SET NULL
  ;

CREATE UNIQUE INDEX IX_ORDERLINES_ORDERID5 ON ORDERLINES5
  (
  ORDERID, ORDERLINEID
  );

ALTER TABLE ORDERLINES5
  ADD CONSTRAINT FK_ORDERID5 FOREIGN KEY (ORDERID)
  REFERENCES ORDERS5 (ORDERID)
  ON DELETE CASCADE
  ;

CREATE FULLTEXT INDEX IX_PROD_ACTOR5 ON PRODUCTS5 
  (
  ACTOR
  );

CREATE INDEX IX_PROD_CATEGORY5 ON PRODUCTS5
  (
  CATEGORY
  );

CREATE FULLTEXT INDEX IX_PROD_TITLE5 ON PRODUCTS5
  (
  TITLE
  );

CREATE INDEX IX_PROD_SPECIAL5 ON PRODUCTS5 
  (
  SPECIAL
  );

ALTER TABLE MEMBERSHIP5
  ADD CONSTRAINT FK_MEMBERSHIP_CUSTID5 FOREIGN KEY (CUSTOMERID)
  REFERENCES CUSTOMERS5 (CUSTOMERID)
  ON DELETE CASCADE
  ;

ALTER TABLE REVIEWS5
  ADD CONSTRAINT FK_REVIEW_CUSTOMERID5 FOREIGN KEY (CUSTOMERID)
  REFERENCES CUSTOMERS5 (CUSTOMERID)
  ON DELETE CASCADE
  ;

CREATE INDEX IX_REVIEWS_PROD_ID5 ON REVIEWS5
  (
  PROD_ID
  );

CREATE INDEX IX_REVIEWS_STARS5 on REVIEWS5
  (
  STARS
  );

CREATE INDEX IX_REVIEWS_PRODSTARS5 on REVIEWS5
  (
  PROD_ID,
  STARS
  );

ALTER TABLE REVIEWS_HELPFULNESS5
  ADD CONSTRAINT FK_REVIEW_ID5 FOREIGN KEY (REVIEW_ID)
  REFERENCES REVIEWS5 (REVIEW_ID)
  ON DELETE CASCADE
  ;

CREATE INDEX IX_REVIEWS_HELP_REVID5 on REVIEWS_HELPFULNESS5
  (
  REVIEW_ID
  );

CREATE INDEX IX_REVIEWS_HELP_CUSTID5 on REVIEWS_HELPFULNESS5
  (
  CUSTOMERID
  );

CREATE INDEX IX_REORDER_PRODID5 on REORDER5
  (
  PROD_ID
  );

